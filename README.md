# GlassDial - 触れる破壊、手の中の再生

M5Dial用のインタラクティブなガラス破壊シミュレーション

## 🎯 概要

GlassDialは、M5Dialのロータリーエンコーダーを使ってガラスが割れる様子をリアルタイムでシミュレートします。右に回すとガラスにひび割れが入り、左に回すと徐々に修復されます。

## ✨ 特徴

- **超敏感な破壊システム**: わずかな回転でひび割れが発生
- **フラクタルひび割れ**: 最大800本のひび割れが6世代にわたって分岐
- **逆回転復元**: 左回転でひび割れを徐々に修復
- **8段階の状態遷移**: NORMAL → TINY_CRACK → SMALL_CRACK → CRACK → BIG_CRACK → SHATTER → HEAVY_SHATTER → SILENCE
- **リアルな音響効果**: 状態に応じた8種類の周波数(1800Hz-4000Hz)
- **シンプルな表示**: 黒背景に白いひび割れ線のみ

## 🔧 技術仕様

### ハードウェア要件
- M5Dial (ESP32-S3)
- 240x240円形ディスプレイ
- ロータリーエンコーダー
- 80dBブザー

### パラメータ
- **破壊感度**: 0.025f (超敏感)
- **復元速度**: 0.008f (逆回転時)
- **最大ひび割れ数**: 800本
- **ひび割れ確率**: 80%
- **分岐世代**: 6レベル
- **分岐確率**: 第1世代 80%, 第2世代 70%

## 🚀 ビルド & アップロード

### 前提条件
- [PlatformIO](https://platformio.org/)
- M5Dialをシリアルポート(COM7)に接続

### コマンド
```bash
# ビルド
pio run

# アップロード
pio run --target upload --upload-port COM7

# シリアルモニター
pio device monitor --port COM7 --baud 115200
```

## 🎮 使い方

1. M5Dialの電源を入れる
2. エンコーダーを**右に回す**: ガラスにひび割れが入る
3. エンコーダーを**左に回す**: ひび割れが徐々に修復される
4. 激しく回すほど、より多くのひび割れが発生

## 📊 状態遷移

| 状態 | 破壊レベル | 周波数 | 視覚効果 |
|------|-----------|--------|---------|
| NORMAL | 0.0 - 0.1 | - | ひび割れなし |
| TINY_CRACK | 0.1 - 0.2 | 1800Hz | 微細なひび |
| SMALL_CRACK | 0.2 - 0.35 | 2200Hz | 小さなひび |
| CRACK | 0.35 - 0.5 | 2600Hz | 中程度のひび |
| BIG_CRACK | 0.5 - 0.65 | 3000Hz | 大きなひび |
| SHATTER | 0.65 - 0.8 | 3500Hz | 粉砕状態 |
| HEAVY_SHATTER | 0.8 - 0.95 | 4000Hz | 激しい粉砕 |
| SILENCE | 0.95 - 1.0 | 600Hz | 完全破壊 |

## 📦 依存関係

- M5Unified (^0.2.0)
- M5GFX (^0.2.0)
- M5Dial (^0.1.1)

## 📝 ライセンス

MIT License

## 🤝 貢献

プルリクエストを歓迎します!

## 📧 作者

furukawa1020
